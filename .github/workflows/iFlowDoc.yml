name: ðŸ¤– Generate iFlow Documentation (Groq API)

on:
  workflow_dispatch:
    inputs:
      package_id:
        description: "Enter CPI Package ID (folder under cpi-artifacts)"
        required: true
        type: string

jobs:
  generate:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Install jq
        run: |
          sudo apt-get update
          sudo apt-get install -y jq

      - name: Generate Documentation Per iFlow
        env:
          GROQ_API_KEY: ${{ secrets.GROQ_API_KEY }}
          PACKAGE_ID: ${{ github.event.inputs.package_id }}
        run: |
          set -e

          GROQ_URL="https://api.groq.com/openai/v1/chat/completions"
          MODEL="gpt-4o-mini"
          PKG_DIR="cpi-artifacts/$PACKAGE_ID"

          if [ ! -d "$PKG_DIR" ]; then
            echo "::error:: Package not found: $PKG_DIR"
            exit 1
          fi

          echo "ðŸ“¦ Processing package: $PACKAGE_ID"

          # SAFE SYSTEM PROMPT USING H
